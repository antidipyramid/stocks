{% extends 'stocks/base.html' %}
{% load static %}
{% block content %}

<script src="{% static 'js/all_trades.js' %}"></script>
<div class="container-md">
  <!-- Start of filter options -->
  <div class="row justify-content-center">
    <div class="col-8">
      <div class="mt-3 mb-3 p-3 border light contrast-box">
        <div class="row justify-content-evenly">
          <div class="col">
            <div class="row m-3">
              <div class="col">
                <div class="input-group input-group-sm">
                  <span class="input-group-text" id="nameInputLabel">Name</span>
                  <input type="text" id="name" class="form-control form-control-sm" placeholder="All" aria-label="senator name search">
                </div>
              </div>
            </div>
            <div class="row m-3">
              <div class="col">
                <div class="form-floating">
                  <select id="party" class="form-select form-select-sm" aria-label="party select">
                    <option value="All" selected>All</option>
                    <option value="Democrat">Democrat</option>
                    <option value="Republican">Republican</option>
                    <option value="Independent">Independent</option>
                  </select>
                  <label for="party">Party</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating">
                  <select id="state" class="form-select form-select-sm" aria-label="state select">
                    <option value="All" selected>All</option>
                    {% for state in state_list %}
                    <option value={{ state }} selected>{{ state }}</option>
                    {% endfor %}
                  </select>
                  <label for="state">State</label>
                </div>
              </div>
            </div>
          </div>
          <div class="col-3">
            <div class="row mt-3">
              <div class="col-1">
                <button onclick="displayFilteredSenators(JSON.parse('{{ senators_json|escapejs }}'))" type="button" class="btn btn-primary">Filter</button>
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-1">
                <button onclick="resetSenators(JSON.parse('{{ senators_json|escapejs }}'))" type="button" class="btn btn-danger">Reset</button>
              </div>
            </div>
            <!-- <button onclick="clearSenators(SENATOR_CARDS)" type="button" class="btn btn-danger">Reset</button> -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Start of list of senators -->
  <div id="senator-cards" class="row justify-content-evenly gx-0">
    {% for senator, latest_trade, latest_asset, count in senators_list %}
    <!-- <div class="col"> -->
    <div id="sen-card " class="card animated mb-3 sen-card" style="width: 22rem;">
      <div class="row g-0">
        <div class="col-md-4">
          <img src="{{ senator.photo_url }}" class="img-fluid" style="object-fit:cover;height:100%;" alt="">
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">
              <a class="link-dark card-link stretched-link" href="/senator/{{ senator.id}}">{{ senator }}</a>
            <span class="badge bg-primary">{{ count }} trades</span>
            </h5>
            <h6>({{ senator.party }}-{{ senator.state }})</h6>
            <!-- <ul class="list-group list-group-flush"> -->
            <!--   <li class="list-group-item"><b>State:</b> </li> -->
            <!--   <li class="list-group-item"><b>Party:</b> {{ senator.get_party_display }}</li> -->
            <!--   <li class="list-group-item"><b>Years In Senate:</b> </li> -->
            <!-- </ul> -->
            <!-- <div class="col" style="text-align:center;"> -->
            <!--   <a class="btn btn-info btn-sm" style="display:inline-block;" href="/senator/{{ senator.id }}" role="button">{{ senator }}</a> -->
            <!-- </div> -->
            <p class="text-end text-muted mb-auto latest-info"><small>
              <b>Most recent:</b> {{ latest_asset }} on {{ latest_trade.transaction_date }}.
            </small></p>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  <!-- </div> -->
</div>


<script src="{% static '/js/senator_search.js' %}"></script>
{% endblock content %}
